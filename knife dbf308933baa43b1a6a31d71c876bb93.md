# knife

enumerate các port

![https://lh7-us.googleusercontent.com/T7S05csOZLsEXXgBU7_na7EGKICf7cnDOI_b3gBMOC3V8KVsxXs0AJpIVGuTFb5ZVyTo-0fFXYwIDXzI96T8Yui15757pizhURA5Gc8zqrQ5ftTTigQxdpIFV8sVa3iDRWI_V9zk_Zre](https://lh7-us.googleusercontent.com/T7S05csOZLsEXXgBU7_na7EGKICf7cnDOI_b3gBMOC3V8KVsxXs0AJpIVGuTFb5ZVyTo-0fFXYwIDXzI96T8Yui15757pizhURA5Gc8zqrQ5ftTTigQxdpIFV8sVa3iDRWI_V9zk_Zre)

không tìm thấy path ẩn

![https://lh7-us.googleusercontent.com/lgIXV3nnPqAOKe02xx2gDxjtuw0Anoy9J5MkSYbriYkQJwbknYjOxxVCU9KI8CTWpJ-hGnsRLuFGu9wfVxvvPfI1bIZcCLI3gx7uPLSAIM0k09M4Frh384hMewDcQ0p0LIttuL4kYxUP](https://lh7-us.googleusercontent.com/lgIXV3nnPqAOKe02xx2gDxjtuw0Anoy9J5MkSYbriYkQJwbknYjOxxVCU9KI8CTWpJ-hGnsRLuFGu9wfVxvvPfI1bIZcCLI3gx7uPLSAIM0k09M4Frh384hMewDcQ0p0LIttuL4kYxUP)

truy cập p80 - trang chủ ko có gì lưu ý

![https://lh7-us.googleusercontent.com/wsO3UrBhNbOkFrbn6_9ja-Nqs4bFWbV4rzAWSLMgDnP0D5FKD-k2SqphD6KLaa3n4kar3-zhbSZHmwBy8o32Bl_hbsrveRTvOpqh1djBhvuGTcAO4JOJL9p1QAStO0ckL_A-56CFNbau](https://lh7-us.googleusercontent.com/wsO3UrBhNbOkFrbn6_9ja-Nqs4bFWbV4rzAWSLMgDnP0D5FKD-k2SqphD6KLaa3n4kar3-zhbSZHmwBy8o32Bl_hbsrveRTvOpqh1djBhvuGTcAO4JOJL9p1QAStO0ckL_A-56CFNbau)

![https://lh7-us.googleusercontent.com/H8stuxash4mc2svzJ1fzuPsbA24kYL82gIy0kg94pXeQ6uupy3K0MoJJx4qIA0Yap3Q1-2E3J5YChAW1mvrICYhiSVDUKCdIk4TL8BHk01LXFI_emihFSY4TrLrWsRNkPPUAtoSdoLES](https://lh7-us.googleusercontent.com/H8stuxash4mc2svzJ1fzuPsbA24kYL82gIy0kg94pXeQ6uupy3K0MoJJx4qIA0Yap3Q1-2E3J5YChAW1mvrICYhiSVDUKCdIk4TL8BHk01LXFI_emihFSY4TrLrWsRNkPPUAtoSdoLES)

tìm exploit cho các version được sử dụng trên

reverse shell:

[php-8.1.0-dev-backdoor-rce/README.md at main · flast101/php-8.1.0-dev-backdoor-rce (github.com)](https://github.com/flast101/php-8.1.0-dev-backdoor-rce/blob/main/README.md)

![https://lh7-us.googleusercontent.com/hH2FhpNCVe1LWNtXeP6um9LkS7fSPaSLvxO-AdacdXQAbfw5jHi-zq0pzLD9KR4SQvqb2XS2vRl1LpiXVfGEUM1Gk-CJ7hbg2b9r16Ihg1GY5Gk619uognu8_TwXd8817nKOsEZ73O1u](https://lh7-us.googleusercontent.com/hH2FhpNCVe1LWNtXeP6um9LkS7fSPaSLvxO-AdacdXQAbfw5jHi-zq0pzLD9KR4SQvqb2XS2vRl1LpiXVfGEUM1Gk-CJ7hbg2b9r16Ihg1GY5Gk619uognu8_TwXd8817nKOsEZ73O1u)

thực thi và netcat -> có được shell của james

![https://lh7-us.googleusercontent.com/9v4umR-9rWPgBnugx6TV67Ao-yJK7q6w4agOfhoFVKcPKVDakilW6TtFV_VMQbUUXpbiycMy5JjZQF8ubVoaX104ZdU5Kx3h0YCqH6Dtf26FUDfbzWRLCRjMhMQY6-U3PS36hjJicaiZ](https://lh7-us.googleusercontent.com/9v4umR-9rWPgBnugx6TV67Ao-yJK7q6w4agOfhoFVKcPKVDakilW6TtFV_VMQbUUXpbiycMy5JjZQF8ubVoaX104ZdU5Kx3h0YCqH6Dtf26FUDfbzWRLCRjMhMQY6-U3PS36hjJicaiZ)

lấy flag user

![https://lh7-us.googleusercontent.com/uonqrdWZ73B7BeUdVO74NtfcrL9z0C2EqHATEm4vqQ-sWtXj9pXVhwWzk2wnGfFclO1WJ47xdjUfjOQCw_5Oh_JIQ5hM9LChsGZGzF244ybyWR6naLpivWJm-OBqXUQIU13BWmG0F3qu](https://lh7-us.googleusercontent.com/uonqrdWZ73B7BeUdVO74NtfcrL9z0C2EqHATEm4vqQ-sWtXj9pXVhwWzk2wnGfFclO1WJ47xdjUfjOQCw_5Oh_JIQ5hM9LChsGZGzF244ybyWR6naLpivWJm-OBqXUQIU13BWmG0F3qu)

liệt kê các quyền mà user james được phép thực thi

user james có thể thực thi /usr/bin/knife dưới quyền root mà không cần pw

![https://lh7-us.googleusercontent.com/JSazCzj9iifYYnQmwyFi23yI5bMIZ8diSDQ4h4XGxRdcW_o2pDicGcLog1_PXa1kZwUvvuZJAD8ZI8HQNXj51Ff9t8W1IF3WwLul9z6Xt8OO3Gf69PftFaGjtT7w-Yu_DYgKXfHFVKCS](https://lh7-us.googleusercontent.com/JSazCzj9iifYYnQmwyFi23yI5bMIZ8diSDQ4h4XGxRdcW_o2pDicGcLog1_PXa1kZwUvvuZJAD8ZI8HQNXj51Ff9t8W1IF3WwLul9z6Xt8OO3Gf69PftFaGjtT7w-Yu_DYgKXfHFVKCS)

tìm kiếm trên gtfobins

![https://lh7-us.googleusercontent.com/WJ-UE8rTrspu2M-Z45TVUACuB3ex52W00KG0c8SbJ6G-1WzJCJv_cKsS85O4MZqBStCuc13apx5XxowEQ4SzYGPPB34vct7lp89UR7AXras0qO0dzU9bOdAyr1NY3SZGhj48xloiwIwl](https://lh7-us.googleusercontent.com/WJ-UE8rTrspu2M-Z45TVUACuB3ex52W00KG0c8SbJ6G-1WzJCJv_cKsS85O4MZqBStCuc13apx5XxowEQ4SzYGPPB34vct7lp89UR7AXras0qO0dzU9bOdAyr1NY3SZGhj48xloiwIwl)

sudo knife exec -E 'exec "/bin/sh"'

có được quyền root

lấy flag root

![https://lh7-us.googleusercontent.com/tRxXduBPdrxh7gAD00ixLURo-dLQ-kPze7p5nEV8PAbvtKW-HztGE5b-cVxMUt7GP00dAbD1_MYjOqpg-orbC_B8RsJarxJUYGrz7qmdJ7vqQ9ZtZMqrPDd-420x6TA8WdTHTTghENhp](https://lh7-us.googleusercontent.com/tRxXduBPdrxh7gAD00ixLURo-dLQ-kPze7p5nEV8PAbvtKW-HztGE5b-cVxMUt7GP00dAbD1_MYjOqpg-orbC_B8RsJarxJUYGrz7qmdJ7vqQ9ZtZMqrPDd-420x6TA8WdTHTTghENhp)